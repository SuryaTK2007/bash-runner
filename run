#!/usr/bin/env bash

# Determine directory where this script lives
script_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Optional filter keyword (first argument)
filter="$1"

# Move into that directory (important if run from elsewhere)
cd "$script_dir"

# Collect all executable scripts inside runs/
scripts=$(find runs -maxdepth 1 -mindepth 1 -executable -type f)

# Loop through each script found
for script in $scripts; do
    # Skip scripts that don't match the filter
    if echo "$script" | grep -qv "$filter"; then
        echo "filtered: $filter -- $script"
        continue
    fi

    # Run matching script
    ./"$script"
done
